import{a}from"./chunk-RQ3JBO34.js";import{a as g}from"./chunk-7NYZPO2S.js";import{n as d,p as f,q as A}from"./chunk-23D7R4XH.js";import{S as u,Y as p,t as l}from"./chunk-27BBFG4U.js";var n=class{name;_id;img;user;constructor(o,e,t,r){this.name=o,this._id=e,this.img=t,this.user=r}};var m=class{id;title;price;description;images;creationAt;updatedAt;category;constructor(o,e,t,r,i,v,w,x){this.id=o,this.title=e,this.price=t,this.description=r,this.images=i,this.creationAt=v,this.updatedAt=w,this.category=x}};var c=class{name;_id;img;user;store;constructor(o,e,t,r,i){this.name=o,this._id=e,this.img=t,this.user=r,this.store=i}};var h=class{id;name;image;creationAt;updatedAt;constructor(o,e,t,r,i){this.id=o,this.name=e,this.image=t,this.creationAt=r,this.updatedAt=i}};var S=f.BASE_URL,q=(()=>{class s{http=p(d);localStorageSvc=p(A);get headers(){return{headers:{"x-token":this.localStorageSvc.getItem("token")||""}}}get token(){return this.localStorageSvc.getItem("token")||""}transformUsers(e){return e.map(t=>new g(t.name,t.email,"",t.img,t.google,t.role,t.uid))}transformStores(e){return e.map(t=>new n(t.name,t.id,t.img,t.user))}transformEmployees(e){return e.map(t=>new c(t.name,t._id,t.img,t.user,t.store))}transformProducts(e){return e.map(t=>new m(t.id,t.title,t.price,t.description,t.images,t.creationAt,t.updatedAt,t.category))}transformCategories(e){return e.map(t=>new h(t.id,t.name,t.image,t.creationAt,t.updatedAt))}globalSearch(e){let t=`${S}/all/${e}`;return this.http.get(t,this.headers).pipe(l(r=>({users:this.transformUsers(r.users),stores:this.transformStores(r.stores),employees:this.transformEmployees(r.employees)})))}search(e,t){let r=`${S}/all/collection/${e}/${t}`;return this.http.get(r,this.headers).pipe(l(i=>{switch(e){case a.users:return this.transformUsers(i.results);case a.stores:return this.transformStores(i.results);case a.employees:return this.transformEmployees(i.results);default:return[]}}))}static \u0275fac=function(t){return new(t||s)};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();export{q as a};
