import{a as q}from"./chunk-JWAOZVIF.js";import{a as j}from"./chunk-GF7EUIHT.js";import{a as R,b as Y}from"./chunk-NKQ37WB7.js";import{a as D}from"./chunk-OYQDOEY2.js";import{a as U}from"./chunk-IRWBXMM3.js";import{a as h}from"./chunk-RQ3JBO34.js";import{d as P,f as A,i as O,p as $}from"./chunk-I5GBPY3C.js";import"./chunk-7NYZPO2S.js";import{e as N}from"./chunk-TRWNYS6K.js";import{h as L}from"./chunk-23D7R4XH.js";import{$a as l,G as S,Ka as x,Ma as y,Pa as w,Qa as i,Ra as o,Sa as f,Ta as _,Ua as g,Va as s,Y as c,_ as C,_a as T,ab as k,bb as M,e as G,f as E,ha as d,hb as V,ia as u,ib as F,jb as I,kb as B,wa as b,za as a}from"./chunk-27BBFG4U.js";var p=G(U());var H=n=>["/dashboard/employee",n];function J(n,v){n&1&&(i(0,"div",7)(1,"div",2)(2,"div",9)(3,"h4",10),l(4,"Loading"),o(),i(5,"div",11)(6,"div",12)(7,"span",13),l(8,"Loading..."),o()()(),i(9,"p",14),l(10,"Please wait"),o()()()())}function K(n,v){if(n&1){let e=_();i(0,"tr")(1,"td",26)(2,"img",29),I(3,"image"),g("click",function(){let r=d(e).$implicit,m=s(2);return u(m.openModal(r))}),o()(),i(4,"td",30),l(5),o(),i(6,"td",31)(7,"a",32),f(8,"i",33),o(),i(9,"a",34),g("click",function(){let r=d(e).$implicit,m=s(2);return u(m.deleteEmployee(r))}),f(10,"i",35),o()()()}if(n&2){let e=v.$implicit,t=s(2);a(2),y("src",B(3,4,e.img,t.imagePipeType),b)("alt",e.name),a(3),k(e.name),a(2),y("routerLink",F(7,H,e._id))}}function Q(n,v){if(n&1&&(i(0,"div",8)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",15)(5,"div",16)(6,"h4",17),l(7),o(),i(8,"h6",18),l(9," Employees registered in the application "),o()(),i(10,"div",19)(11,"div",20)(12,"button",21),f(13,"i",22),l(14," \xA0 Create New Employee "),o()()()(),i(15,"div",23)(16,"table",24)(17,"thead")(18,"tr")(19,"th",25),l(20,"Image"),o(),i(21,"th",26),l(22,"Name"),o(),i(23,"th",27),l(24,"Actions"),o()()(),i(25,"tbody"),x(26,K,11,9,"tr",28),o()()()()()()()),n&2){let e=s();a(7),M("Total Employees (",e.employees.length,")"),a(19),y("ngForOf",e.employees)}}var ye=(()=>{class n{searchesSvc=c(D);employeeSvc=c(q);imageModalSvc=c(j);imgSubs;loading=!0;employees=[];tempEmployees=[];totalEmployees=0;imagePipeType=h.employees;ngOnInit(){this.loadEmployees(),this.imgSubs=this.imageModalSvc.newImage.pipe(S(100)).subscribe(e=>{this.loadEmployees()})}ngOnDestroy(){this.imgSubs.unsubscribe()}search(e){if(e.length===0){this.employees=this.tempEmployees;return}this.searchesSvc.search(h.employees,e).subscribe({next:t=>{this.employees=t},error:t=>{console.log(t)}})}loadEmployees(){this.loading=!0,this.employeeSvc.getEmployees().subscribe({next:e=>{this.employees=e,this.tempEmployees=e,this.loading=!1},error:e=>{console.log(e)}})}deleteEmployee(e){p.default.fire({title:"Are you sure?",text:`You are going to delete ${e.name}`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&this.employeeSvc.deleteEmployee(e._id).subscribe({next:r=>{this.loadEmployees()},error:r=>{p.default.fire("Error",r.error.msg,"error")}})},t=>{console.log(t)})}createEmployee(){return E(this,null,function*(){let{value:e=""}=yield p.default.fire({title:"Create a new employee",input:"text",inputLabel:"Enter employee name",inputPlaceholder:"Name of the employee",showCancelButton:!0,confirmButtonText:"Create",cancelButtonText:"Cancel",showLoaderOnConfirm:!0,preConfirm:t=>this.employeeSvc.createEmployee(t).subscribe({next:r=>{this.loadEmployees()},error:r=>{p.default.showValidationMessage(`Request failed: ${r.error.msg}`)}})})})}openModal(e){console.log(e),this.imageModalSvc.openModal(h.employees,e._id,e.img)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=C({type:n,selectors:[["app-employees"]],standalone:!0,features:[V],decls:10,vars:1,consts:[["searchTerm",""],[1,"row","mt-4"],[1,"col-12"],[1,"card"],[1,"card-body"],["role","search",1,"d-flex"],["type","search","placeholder","Search Employee","aria-label","Search Employee",1,"form-control","me-2",3,"keyup"],[1,"row","animated","fadeIn","fast"],[1,"row"],[1,"alert","alert-dark","text-center"],[1,"alert-heading"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-grow","text-secondary"],[1,"visually-hidden"],[1,"mb-0"],[1,"row","mb-3"],[1,"col-8"],[1,"card-title"],[1,"card-subtitle"],[1,"col","mt-2"],[1,"d-grid","gap-2","d-md-flex","justify-content-md-end"],["routerLink","/maintenances/employee/new",1,"btn","btn-secondary"],[1,"fas","fa-user-plus"],[1,"table-responsive"],[1,"table","table-bordered"],[1,"w100","text-center"],[1,"text-center"],[1,"text-nowrap","w100","text-center"],[4,"ngFor","ngForOf"],[1,"avatar","cursor",3,"click","src","alt"],[1,"text-center","align-middle"],[1,"text-nowrap","d-flex","justify-content-evenly"],["data-toggle","tooltip","data-original-title","Save Changes",1,"cursor",3,"routerLink"],[1,"fa","fa-pencil","text-dark","mt-3"],["data-toggle","tooltip","data-original-title","Delete",1,"cursor",3,"click"],[1,"fa","fa-close","text-danger","mt-3"]],template:function(t,r){if(t&1){let m=_();i(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"form",5)(5,"input",6,0),g("keyup",function(){d(m);let z=T(6);return u(r.search(z.value))}),o()()()()()(),l(7,`
\xA0 `),x(8,J,11,0,"div",7)(9,Q,27,2,"div",8)}t&2&&(a(8),w(r.loading?8:r.loading?-1:9))},dependencies:[L,$,O,P,A,Y,R,N]})}return n})();export{ye as EmployeesComponent};
