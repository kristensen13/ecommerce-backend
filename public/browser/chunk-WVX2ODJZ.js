import{a as A}from"./chunk-ER5V5IQH.js";import{a as z}from"./chunk-IRWBXMM3.js";import{a as G}from"./chunk-RQ3JBO34.js";import{a as C,b as c,c as E,d as U,e as x,g as v,i as T,j as P,k as I,o as N,q as w}from"./chunk-I5GBPY3C.js";import{a as F}from"./chunk-22JHINBQ.js";import"./chunk-7NYZPO2S.js";import"./chunk-TRWNYS6K.js";import"./chunk-23D7R4XH.js";import{$a as s,Ka as S,Ma as m,Pa as g,Qa as r,Ra as t,Sa as a,Ua as u,Va as b,Y as p,_ as y,e as k,hb as _,wa as f,za as l}from"./chunk-27BBFG4U.js";var d=k(z());function M(n,D){if(n&1&&a(0,"img",18),n&2){let i=b();m("src",i.user.imageUrl,f)}}function R(n,D){if(n&1&&a(0,"img",18),n&2){let i=b();m("src",i.imgTemp,f)}}var Q=(()=>{class n{fb=p(N);userSvc=p(F);uploadFileSvc=p(A);user;uploadImage;imgTemp="";profileForm=new x({name:new v(""),email:new v("")});submitted=!1;constructor(){this.user=this.userSvc.user||{name:"",email:"",img:"",role:"",google:!1,uid:""}}ngOnInit(){this.profileForm=this.fb.group({name:[this.user.name,c.required],email:[this.user.email,[c.required,c.email]]})}updateProfile(){this.userSvc.updateProfile(this.profileForm.value).subscribe({next:i=>{let{name:o,email:e}=this.profileForm.value;this.user.name=o,this.user.email=e,d.default.fire("Updated","Profile updated successfully","success")},error:i=>{console.log(i),d.default.fire("Error",i.error.msg,"error")}})}changeImage(i){let o=i.target.files[0];if(this.uploadImage=o,!o)return this.imgTemp=null;let e=new FileReader;return e.readAsDataURL(o),e.onloadend=()=>{this.imgTemp=e.result},null}imageUpload(){this.uploadFileSvc.uploadFile(this.uploadImage,G.users,this.user.uid||"").then(i=>{this.user.img=i,d.default.fire("Updated","Image updated successfully","success")}).catch(i=>{d.default.fire("Error","Error uploading image","error")})}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=y({type:n,selectors:[["app-profile"]],standalone:!0,features:[_],decls:37,vars:6,consts:[[1,"row","mt-5"],[1,"col-md-6"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-subtitle"],[1,"form","pt-3",3,"submit","formGroup"],[1,"input-group","mb-3"],["id","basic-addon1",1,"input-group-text"],[1,"bi","bi-person"],["type","text","placeholder","Username","aria-label","Username","aria-describedby","basic-addon1","formControlName","name",1,"form-control"],["id","basic-addon2",1,"input-group-text"],[1,"bi","bi-envelope"],["type","text","placeholder","Email","aria-label","Email","aria-describedby","basic-addon2","formControlName","email",1,"form-control",3,"readOnly"],[1,"d-grid","gap-2","mt-5"],["type","submit",1,"btn","btn-secondary",3,"disabled"],[1,"fas","fa-save"],[1,"d-flex","justify-content-center"],[1,"img-avatar","mb-4",3,"src"],["type","file","id","inputGroupFile02",1,"form-control",3,"change"],["type","button",1,"btn","btn-secondary",3,"click","disabled"]],template:function(o,e){o&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h4",4),s(5,"User Profile"),t(),r(6,"h6",5),s(7,"Settings"),t(),r(8,"form",6),u("submit",function(){return e.updateProfile()}),r(9,"div",7)(10,"span",8),a(11,"i",9),t(),a(12,"input",10),t(),r(13,"div",7)(14,"span",11),a(15,"i",12),t(),a(16,"input",13),t(),r(17,"div",14)(18,"button",15),a(19,"i",16),s(20," \xA0 Submit "),t()()()()()(),r(21,"div",1)(22,"div",2)(23,"div",3)(24,"h4",4),s(25,"Avatar"),t(),r(26,"h6",5),s(27,"User Image"),t(),r(28,"div",17),S(29,M,1,1,"img",18)(30,R,1,1,"img",18),t(),r(31,"div",7)(32,"input",19),u("change",function(O){return e.changeImage(O)}),t()(),r(33,"div",14)(34,"button",20),u("click",function(){return e.imageUpload()}),a(35,"i",16),s(36," \xA0 Update Image "),t()()()()()()),o&2&&(l(8),m("formGroup",e.profileForm),l(8),m("readOnly",e.user.google),l(2),m("disabled",e.profileForm.invalid),l(11),g(e.imgTemp?-1:29),l(),g(e.imgTemp?30:-1),l(4),m("disabled",!e.uploadImage))},dependencies:[w,T,C,E,U,P,I]})}return n})();export{Q as ProfileComponent};
